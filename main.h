/*
 * libwebsockets-test-server - libwebsockets test implementation
 *
 * Copyright (C) 2010-2016 Andy Green <andy@warmcat.com>
 *
 * This file is made available under the Creative Commons CC0 1.0
 * Universal Public Domain Dedication.
 *
 * The person who associated a work with this deed has dedicated
 * the work to the public domain by waiving all of his or her rights
 * to the work worldwide under copyright law, including all related
 * and neighboring rights, to the extent allowed by law. You can copy,
 * modify, distribute and perform the work, even for commercial purposes,
 * all without asking permission.
 *
 * The test apps are intended to be adapted for use in your code, which
 * may be proprietary.  So unlike the library itself, they are licensed
 * Public Domain.
 */

#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>
#include <signal.h>
#include <string.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <assert.h>
#include <libwebsockets.h>
#include <syslog.h>
#include <sys/time.h>
#include <unistd.h>

#include <pthread.h>
#include <math.h>
#include <fftw3.h>
#include "libairspy/libairspy/src/airspy.h"

int32_t fft_line_compensation[1024] = {
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

	2869,2869,2869,2869,2869,2869,2869,2869,2883,2910,2910,2902,2884,2930,2936,2935,2969,2975,3008,3011,3027,3057,3057,3062,3069,3082,3083,3148,3149,3194,3222,3278,3313,3329,3344,3381,3396,3423,3450,3497,3523,3569,3562,3583,3585,3611,3581,3589,3603,3639,3654,3658,3691,3702,3697,3708,3718,3738,3741,3775,3803,3832,3848,3833,3836,3837,3883,3876,3880,3904,3910,3928,3942,3985,3966,3964,3946,3931,3979,3977,3997,3965,3987,4003,4030,4076,4092,4109,4100,4124,4138,4185,4228,4218,4232,4249,4286,4301,4324,4310,4280,4278,4258,4253,4252,4266,4273,4302,4315,4321,4313,4308,4314,4310,4322,4344,4345,4341,4361,4384,4406,4410,4382,4368,4372,4407,4415,4397,4397,4394,4411,4420,4434,4439,4447,4438,4424,4425,4428,4441,4416,4442,4469,4497,4507,4516,4543,4582,4603,4603,4600,4636,4649,4672,4673,4719,4715,4687,4680,4683,4679,4671,4654,4680,4678,4686,4664,4674,4675,4683,4643,4651,4722,4720,4717,4704,4729,4727,4711,4712,4706,4723,4721,4734,4745,4776,4813,4790,4813,4847,4864,4866,4912,4902,4963,4989,5010,5044,5091,5104,5124,5100,5117,5120,5084,5104,5108,5123,5137,5095,5137,5154,5177,5167,5180,5191,5217,5247,5265,5317,5334,5343,5332,5371,5388,5375,5381,5376,5393,5407,5415,5407,5399,5395,5394,5416,5439,5448,5441,5480,5469,5475,5491,5506,5501,5501,5558,5588,5621,5640,5641,5646,5678,5681,5696,5725,5725,5716,5712,5755,5784,5761,5755,5736,5764,5730,5723,5729,5765,5748,5755,5782,5796,5819,5798,5810,5832,5834,5849,5826,5879,5900,5902,5882,5898,5906,5897,5944,5918,5942,5930,5942,5945,5958,5970,5995,6013,6031,6042,6055,6070,6094,6064,6070,6071,6091,6097,6126,6161,6183,6190,6207,6232,6263,6302,6327,6343,6372,6380,6394,6400,6391,6382,6372,6386,6358,6347,6339,6323,6289,6246,6239,6231,6256,6268,6270,6272,6293,6304,6322,6343,6339,6316,6343,6350,6383,6389,6405,6395,6393,6387,6394,6397,6380,6348,6316,6285,6282,6266,6240,6229,6220,6182,6193,6182,6189,6187,6154,6152,6142,6171,6207,6217,6205,6207,6177,6155,6164,6142,6140,6124,6114,6116,6110,6088,6072,6065,6046,6038,6022,6013,6016,5988,5975,5931,5905,5888,5863,5861,5865,5841,5776,5728,5685,5658,5672,5650,5676,5647,5670,5666,5646,5628,5602,5577,5581,5611,5630,5615,5634,5601,5582,5513,5507,5467,5461,5440,5389,5374,5349,5284,5248,5215,5224,5191,5169,5169,5180,5170,5180,5158,5150,5156,5140,5136,5154,5145,5147,5111,5099,5101,5070,5033,4993,4940,4888,4858,4867,4834,4799,4790,4775,4755,4759,4752,4731,4731,4712,4735,4735,4767,4775,4772,4772,4764,4733,4746,4736,4759,4754,4756,4756,4781,4774,4766,4747,4725,4696,4660,4670,4651,4618,4605,4538,4505,4465,4418,4400,4368,4341,4325,4298,4273,4274,4266,4262,4265,4236,4231,4217,4209,4214,4169,4131,4115,4066,4051,4004,3965,3926,3898,3827,3792,3760,3721,3663,3599,3552,3517,3452,3414,3366,3368,3342,3288,3238,3222,3219,3166,3137,3134,3098,3087,3077,3079,3090,3042,2985,2933,2893,2865,2816,2731,2705,2655,2584,2543,2479,2420,2360,2293,2294,2267,2258,2237,2202,2182,2179,2153,2140,2134,2128,2135,2127,2112,2109,2061,2043,2028,2010,1986,1969,1948,1922,1897,1871,1847,1820,1778,1756,1706,1668,1631,1592,1564,1549,1521,1493,1487,1438,1439,1417,1391,1361,1364,1348,1356,1334,1313,1296,1288,1272,1249,1216,1202,1194,1184,1171,1174,1118,1093,1079,1076,1064,1046,1004,984,978,948,945,915,860,835,825,825,817,802,769,715,683,695,674,644,671,664,623,612,597,580,538,522,500,508,537,525,478,450,453,407,345,333,324,309,292,287,278,250,219,194,178,193,183,162,153,201,201,195,178,164,171,152,127,119,97,125,93,81,53,62,29,0,26,28,9,22,25,53,60,77,63,70,111,133,141,141,149,133,142,180,171,181,204,200,198,216,232,201,192,181,208,247,274,274,249,263,279,252,286,310,302,320,339,377,389,389,393,391,429,450,471,464,494,486,496,497,487,483,486,510,476,468,448,403,412,425,427,443,448,441,464,488,500,477,459,492,483,510,540,535,506,494,469,462,467,448,440,451,470,486,482,489,500,502,502,494,512,525,560,556,588,585,608,621,644,690,720,720,736,740,766,770,786,775,791,761,763,717,699,671,634,589,558,494,494,494,494,494,494,494,494,

	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};